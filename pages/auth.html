<div id="auth-content-wrapper" class="container mx-auto max-w-md p-8 bg-[#161b22] rounded-3xl shadow-2xl border border-[#30363d] text-center">
    <div id="auth-form-ui">
        <div class="mb-6">
            <div class="inline-block p-3 rounded-full bg-blue-500/10 border border-blue-500/20 mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-[#58a6ff]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A10.003 10.003 0 0012 3c1.268 0 2.39.234 3.414.658m1.11 1.764c.733.733 1.298 1.588 1.628 2.506m1.037 4.044a10.004 10.004 0 01-5.694 8.761" />
                </svg>
            </div>
            <h2 class="text-2xl font-bold text-[#58a6ff] tracking-tighter uppercase">Identit√§t Erstellen</h2>
            <p class="text-[10px] text-gray-500 font-mono mt-1">CORE SYSTEM: PZQQET-IDENTITY-LOCK</p>
        </div>

        <div class="space-y-4">
            <div>
                <label class="block text-left text-[9px] text-gray-500 uppercase ml-2 mb-1">Globaler Nutzername</label>
                <input id="reg-user" type="text" placeholder="z.B. Satoramy_42" 
                    class="w-full bg-[#0d1117] border border-[#30363d] p-3 rounded-xl text-white text-sm focus:border-blue-500 outline-none transition-all">
            </div>
            <div>
                <label class="block text-left text-[9px] text-gray-500 uppercase ml-2 mb-1">Master-Passwort</label>
                <input id="reg-pass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" 
                    class="w-full bg-[#0d1117] border border-[#30363d] p-3 rounded-xl text-white text-sm focus:border-blue-500 outline-none transition-all">
            </div>
            
            <button onclick="finalizeIdentity()" 
                class="w-full bg-[#238636] hover:bg-[#2ea043] text-white font-bold py-4 rounded-2xl transition-all transform hover:scale-[1.02] shadow-lg text-xs uppercase tracking-widest mt-4">
                Identit√§t im Netz verankern
            </button>
        </div>

        <p class="mt-6 text-[9px] text-gray-600 italic">
            Hinweis: Diese Daten werden lokal in deinem PZQQET-Knoten verschl√ºsselt und bilden die Basis f√ºr deine Global VIP Card.
        </p>
    </div>
</div>

<script>
/**
 * Initialisiert die Logik f√ºr die Auth-Seite.
 * Pr√ºft, ob bereits eine PZQQET-Identit√§t verankert ist.
 */
function initAuthLogic() {
    const currentUser = localStorage.getItem('rfof_username');
    const wrapper = document.getElementById('auth-content-wrapper');
    
    if (currentUser) {
        // ZUSTAND: BEREITS VERANKERT -> Zeige Status-Dashboard statt Formular
        wrapper.innerHTML = `
            <div class="mb-6">
                <div class="inline-block p-4 rounded-full bg-green-500/10 border border-green-500/30 mb-4">
                    <span class="text-3xl">üõ°Ô∏è</span>
                </div>
                <h2 class="text-2xl font-bold text-green-400 tracking-tighter uppercase">Identit√§t Aktiv</h2>
                <p class="text-[10px] text-gray-500 font-mono mt-1">Status: VERANKERT IM RFOF-NETWORK</p>
            </div>
            
            <div class="bg-[#0d1117] border border-[#30363d] p-4 rounded-2xl mb-6 text-left">
                <span class="text-[9px] text-gray-500 uppercase block mb-1">Aktueller Knoten:</span>
                <span class="text-white font-mono font-bold">${currentUser}</span>
            </div>

            <div class="space-y-3">
                <a href="#profile" class="block w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-2xl transition-all text-xs uppercase tracking-widest">
                    Zum Profil
                </a>
                <button onclick="logoutPZQQET()" class="w-full bg-transparent border border-red-500/30 text-red-500/70 hover:text-red-500 hover:bg-red-500/10 py-3 rounded-xl text-[9px] uppercase transition-all">
                    Identit√§t vom Netz l√∂sen (Logout)
                </button>
            </div>
        `;
    }
}

/**
 * Erstellt eine neue Identit√§t und verankert sie im LocalStorage.
 */
function finalizeIdentity() {
    const user = document.getElementById('reg-user').value.trim();
    const pass = document.getElementById('reg-pass').value.trim();
    
    if(!user || !pass) {
        alert("Fehler: Name und Passwort erforderlich f√ºr System-Parity.");
        return;
    }

    localStorage.setItem('rfof_username', user);
    localStorage.setItem('rfof_password', pass);
    localStorage.setItem('rfof_state', 'WARM'); 
    localStorage.setItem('rfof_balance', '0.00'); 
    
    const randomIban = "DE" + Math.floor(Math.random() * 10**18).toString().padStart(18, '0');
    localStorage.setItem('rfof_active_iban', randomIban);

    alert("Identit√§t erfolgreich verankert. Willkommen im RFOF-NETWORK.");
    window.location.hash = '#profile';
    location.reload(); // Wichtig, um die app.js Header-Buttons zu aktualisieren
}

/**
 * L√∂scht die aktive Session-Identit√§t.
 */
window.logoutPZQQET = () => {
    if(confirm("M√∂chtest du die Identit√§t l√∂sen? Dein Zugriff auf Profil & Banking wird gesperrt.")) {
        localStorage.removeItem('rfof_username');
        window.location.hash = '#home';
        location.reload();
    }
};

// Autostart der Pr√ºfung
initAuthLogic();
</script>
